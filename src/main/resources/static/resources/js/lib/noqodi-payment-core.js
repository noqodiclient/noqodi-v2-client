!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}n.r(t);var l=function(){function e(){u(this,e),e.styleStart='<span class="text-danger font-weight-normal rounded px-1" style="background: #fdfde9;">',e.styleEnd="</span>",$("#balance-commands-div-carousel").on("slide.bs.carousel",function(){this.hideView()}.bind(this)),this.commandResponseJsonView=$("#command-response-json-view"),this.commandRequestJsonView=$("#command-request-json-view"),this.commandRequestText=$("#command-request-text"),this.commandResponseText=$("#command-response-text"),this.commandHttpMethodText=$("#command-http-method-text"),this.commandHttpUrlText=$("#command-http-url-text"),this.commandHttpStatusText=$("#command-http-status-text"),this.commandHeaderText=$("#command-response-header-text"),this.commandResultComponent=$("#command-result-component-div")}return d(e,[{key:"hideView",value:function(){this.unPpretify(),this.toggleView("hide"),E.scrollTop($("html, body"))}},{key:"showView",value:function(e,t){setTimeout(function(){this.updateCommandResponseView(e),this.pretify(),this.toggleView("show"),E.scrollTop(this.commandResultComponent,t)}.bind(this),400)}},{key:"toggleView",value:function(e){this.commandResultComponent.collapse(e)}},{key:"pretify",value:function(){PR.prettyPrint()}},{key:"unPpretify",value:function(){this.commandResponseJsonView.removeClass("prettyprinted").removeAttr("style"),this.commandRequestJsonView.removeClass("prettyprinted").removeAttr("style")}},{key:"updateCommandResponseView",value:function(e){e.isJsonRequest?(this.commandRequestText.hide(),this.commandRequestJsonView.show().html(e.request)):(this.commandRequestJsonView.hide(),this.commandRequestText.show().html(e.request)),e.isJsonResponse?(this.commandResponseText.hide(),this.commandResponseJsonView.show().html(e.response)):(this.commandResponseJsonView.hide(),this.commandResponseText.show().html(e.response)),this.commandHttpMethodText.text(e.httpMethod),this.commandHttpUrlText.html(e.requestUrl),this.commandHttpStatusText.text(e.httpStatus),this.commandHeaderText.text(e.headerText)}}],[{key:"disableExecuteCommandButton",value:function(t){t&&e.toggleExecuteCommandButton(t,!0)}},{key:"enableExecuteCommandButton",value:function(t){t&&setTimeout(function(){e.toggleExecuteCommandButton(t,!1)},1e3)}},{key:"toggleExecuteCommandButton",value:function(e,t){e&&e.attr("disabled",t)}}]),e}(),m={beneficiaryOneAmount:3599.99,beneficiaryTwoAmount:1999.99},p=function(){function e(){u(this,e)}return d(e,null,[{key:"init",value:function(){e.initItemEditorPopover(e.itemOneEditButton),e.initItemEditorPopover(e.itemTwoEditButton),e.initItemEditorToggle(),e.initItemEditorActions(e.itemOneEditButton,"beneficiaryOneAmount"),e.initItemEditorActions(e.itemTwoEditButton,"beneficiaryTwoAmount"),e.updateOrderAmount(m.beneficiaryOneAmount,m.beneficiaryTwoAmount)}},{key:"updateItemAmount",value:function(t,n){isNaN(t)||("beneficiaryOneAmount"===n?m.beneficiaryOneAmount=(+t).toFixed(2):"beneficiaryTwoAmount"===n&&(m.beneficiaryTwoAmount=(+t).toFixed(2)),e.updateOrderAmount(m.beneficiaryOneAmount,m.beneficiaryTwoAmount))}},{key:"updateOrderAmount",value:function(e,t){$("#item-1-amount-text").text("AED "+e),$("#item-2-amount-text").text("AED "+t),$("#order-total-text").text("AED "+(+e+ +t).toFixed(2))}},{key:"initItemEditorPopover",value:function(e){e.popover({container:"body",html:!0,placement:"left",title:"Update Amount",trigger:"manual",animation:!1,template:'<div class="popover shadow border-0 amount-editor-popover" role="tooltip">\n    <div class="arrow"></div>\n    <h3 class="popover-header bg-danger text-white"></h3>\n    <div class="popover-body"></div>\n</div>',content:'\n<div class="row px-3">\n    <div class="col-9 m-0 p-0 pr-1">    \n        <div class="input-group my-auto">\n            <div class="input-group-prepend">\n                <span class="input-group-text">AED</span>\n            </div>\n            <input id="order-item-new-amount" type="number" class="form-control input-sm" placeholder="Amount" aria-label="Amount">\n        </div>\n    </div>\n    <div class="col-3 row m-0 p-0 pl-1">\n        <div class="col m-0 p-0 pr-1">\n            <h3 id="update-item-amount-button" class="text-success m-0"><i class="fas fa-check"></i></h3>\n        </div>\n        <div class="col m-0 p-0 pl-1">\n            <h3 id="cancel-update-item-amount-button" class="text-danger m-0"><i class="fas fa-times"></i></h3>\n        </div>\n    </div>\n</div>'})}},{key:"initItemEditorActions",value:function(t,n){t.on("shown.bs.popover",function(){var t=$("#update-item-amount-button"),o=$("#cancel-update-item-amount-button"),i=$("#order-item-new-amount");i.val(e.getCurrentValue(n)),t.off().on("click",function(){e.updateItemAmount(i.val(),n),e.hideAll()}),o.off().on("click",function(){e.hideAll()})})}},{key:"getCurrentValue",value:function(e){return"beneficiaryOneAmount"===e?m.beneficiaryOneAmount:"beneficiaryTwoAmount"===e?m.beneficiaryTwoAmount:0}},{key:"hideAll",value:function(){e.itemOneEditButton.popover("hide"),e.itemTwoEditButton.popover("hide")}},{key:"initItemEditorToggle",value:function(){e.itemOneEditButton.off().on("click",function(){e.editDisabled||e.itemOneEditButton.popover("toggle")}),e.itemOneEditButton.on("show.bs.popover",function(){e.itemTwoEditButton.popover("hide")}),e.itemTwoEditButton.off().on("click",function(){e.editDisabled||e.itemTwoEditButton.popover("toggle")}),e.itemTwoEditButton.on("show.bs.popover",function(){e.itemOneEditButton.popover("hide")})}},{key:"itemOneEditButton",get:function(){return $("#item-1-amount-edit")}},{key:"itemTwoEditButton",get:function(){return $("#item-2-amount-edit")}},{key:"editDisabled",get:function(){return e._editDisabled},set:function(t){e._editDisabled=t}}]),e}(),f=function(){function e(t,n,o){u(this,e),this.preActionHandler=t,this.successHandler=n,this.errorHandler=o}return d(e,[{key:"preActionHandler",value:function(){this.preActionHandler()}},{key:"successHandler",value:function(e){this.successHandler(e)}},{key:"errorHandler",value:function(){this.errorHandler()}}]),e}(),h=function(){function e(t,n,o,i,a,s){u(this,e),this.uri=t,this.type=n,this.commandHandler=o,this.isJsonRequest=i,this.isJsonResponse=a,this.headerText=s+" - API Request/Response"}return d(e,[{key:"execute",value:function(e,t,n){var o=!!t;this.commandHandler.preActionHandler();var i=this,a=T.appBaseUrl+T.apiBasePath+this.uri+(n||""),s=o?"Basic "+btoa(t.username+":"+t.password):"Bearer "+R.getApiAccessToken(),r={xhrFields:{withCredentials:!0},beforeSend:function(e){e.setRequestHeader("Authorization",s)},success:function(e){e.isJsonRequest=i.isJsonRequest,e.isJsonResponse=i.isJsonResponse,e.headerText=i.headerText,i.commandHandler.successHandler(e),o||R.setFailedApiCommandAndOptions(null,null)},error:function(a){if(401===a.status||403===a.status){var s="";if(s=t?"The server is not happy with the credentials you provided...\n- you can either keep guessing...\n- or phone a friend...\n- or as a last resort, ask us nicely...":"Ummm... your session expired many many many centuries ago...\n2000 BC, to be precise...\nplease re-login if you want to stay happy on this site...",alert(s),R.deleteAccessCredentials(),R.showAccessCredentialsForm(),o)return;var r={request:e,pathVariable:n};R.setFailedApiCommandAndOptions(i,r)}else alert("Oops! here goes an undocumented feature :(\nplease tell us about it so we can fix it.");i.commandHandler.errorHandler()},type:i.type,url:a};e&&(r.data=JSON.stringify(e),r.contentType="application/json"),$.ajax(r)}}],[{key:"encode",value:function(e){return e?"/"+encodeURI(e):""}}]),e}(),y=function(e){function t(e){return u(this,t),i(this,a(t).call(this,"/token","POST",e,!1,!1,""))}return s(t,h),t}(),v=function(e){function t(e){return u(this,t),i(this,a(t).call(this,"/payments/preAuth","POST",e,!0,!0,"Pre-Auth Payment"))}return s(t,h),t}(),g=function(){function e(t,n){u(this,e),this.commandHandler=t,this.iFrameManager=n}return d(e,[{key:"execute",value:function(e){e?(this.commandHandler.preActionHandler(e,!0),this.iFrameManager.load(e),this.commandHandler.successHandler(e,!0)):(this.commandHandler.preActionHandler(e,!1),this.iFrameManager.unload(),this.commandHandler.successHandler(e,!1))}}]),e}(),A=function(e){function t(e){return u(this,t),i(this,a(t).call(this,"/payments/auth","POST",e,!1,!0,"Auth Response Payment"))}return s(t,h),t}(),k=function(e){function t(e){return u(this,t),i(this,a(t).call(this,"/payments/voidAuth","POST",e,!0,!0,"Void Auth Payment"))}return s(t,h),t}(),b=function(e){function t(e){return u(this,t),i(this,a(t).call(this,"/payments/capture","POST",e,!0,!0,"Capture Payment"))}return s(t,h),t}(),w=function(){function e(t,n){u(this,e),this.noqodiPaymentIFrame=t,this.noqodiPaymentIFrameDiv=n}return d(e,[{key:"load",value:function(e){this.noqodiPaymentIFrame.src=e,this.noqodiPaymentIFrameDiv.collapse("show")}},{key:"unload",value:function(){this.noqodiPaymentIFrameDiv.collapse("hide"),this.noqodiPaymentIFrame.src="",this.noqodiPaymentIFrame.innerHTML=""}}]),e}(),T={noqodiPaymentPage:null,noqodiPaymentPageOrigin:null,callbackUrl:null,noqodiReadyData:null,apiBasePath:null,appBaseUrl:null},x=function(){function e(){u(this,e)}return d(e,[{key:"noqodiPaymentPage",value:function(e){return e&&(T.noqodiPaymentPage=e),this}},{key:"noqodiPaymentPageOrigin",value:function(e){return e&&(T.noqodiPaymentPageOrigin=e),this}},{key:"callbackUrl",value:function(e){return e&&(T.callbackUrl=e),this}},{key:"noqodiReadyData",value:function(e){return e&&(T.noqodiReadyData=e),this}},{key:"apiBasePath",value:function(e){return e&&(T.apiBasePath=e),this}},{key:"appBaseUrl",value:function(e){return e&&(T.appBaseUrl=e),this}}],[{key:"builder",value:function(){return e.instance?e.instance:e.instance=new e}},{key:"instance",get:function(){return e._instance},set:function(t){e._instance=t}}]),e}(),E=function(){function e(){u(this,e)}return d(e,null,[{key:"bindEvent",value:function(t,n,o){e.unbindEvent(t,n,o),t.addEventListener?t.addEventListener(n,o):t.attachEvent&&t.attachEvent("on"+n,o)}},{key:"unbindEvent",value:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent("on"+t,n)}},{key:"toggleTraceElementAnimation",value:function(e,t){t?setTimeout(function(){e.removeClass("animated-trace-element")},1e3):e.removeClass("animated-trace-element").addClass("animated-trace-element")}},{key:"toggleTraceElement",value:function(e,t){e.attr("disabled",!t),e.removeClass(t?"btn-secondary":"btn-outline-success").addClass(t?"btn-outline-success":"btn-secondary")}},{key:"finalizeCommandResult",value:function(t){var n=e.setDefaults(t),o={};return o.request=n.isJsonRequest?e.jsonStringifyOmitNulls(n.request,null,2):n.request,o.response=n.isJsonResponse?e.jsonStringifyOmitNulls(n.response,null,2):n.response,o.httpMethod=n.httpMethod,o.requestUrl=n.requestUrl,o.httpStatus=n.httpStatus,o.isJsonRequest=n.isJsonRequest,o.isJsonResponse=n.isJsonResponse,o.headerText=n.headerText,o}},{key:"setDefaults",value:function(e){var t={};return t.request=e.request?e.request:"N/A",t.response=e.response?e.response:"N/A",t.httpMethod=e.httpMethod?e.httpMethod:"N/A",t.requestUrl=e.requestUrl?e.requestUrl:"N/A",t.httpStatus=e.httpStatus?e.httpStatus:"N/A",t.isJsonRequest=e.isJsonRequest,t.isJsonResponse=e.isJsonResponse,t.headerText=e.headerText?e.headerText:"N/A",t}},{key:"jsonStringifyOmitNulls",value:function(e){return JSON.stringify(e,function(e,t){if(null!==t)return t},2)}},{key:"uuidv4",value:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}},{key:"scrollTop",value:function(e,t){$("html, body").animate({scrollTop:e.offset().top-(t||0)},500)}},{key:"isCommandResponseSuccess",value:function(e){return e.response&&e.response.statusInfo&&e.response.statusInfo.status&&"SUCCESS"===e.response.statusInfo.status}}]),e}(),C=function(){function e(){u(this,e)}return d(e,null,[{key:"setup",value:function(){e.payments={authorized:[],captured:[],voided:[],refunded:[],payouts:[]},e.loadFromStorage()}},{key:"addAuthorizedPayment",value:function(t){e.payments.authorized.push(t),e.updateToStorage()}},{key:"addCapturedPayment",value:function(t){e.payments.captured.push(t),e.updateToStorage()}},{key:"addVoidedPayment",value:function(t){e.payments.voided.push(t),e.updateToStorage()}},{key:"addRefundedPayment",value:function(t){e.payments.refunded.some(function(e){return e.merchantInfo.merchantOrderId===t.merchantInfo.merchantOrderId})||(e.payments.refunded.push(t),e.updateToStorage())}},{key:"addRPayouts",value:function(t){e.payments.payouts.push(t),e.updateToStorage()}},{key:"loadFromStorage",value:function(){if(window.sessionStorage&&sessionStorage.payments){var t=JSON.parse(sessionStorage.payments);e.payments.authorized=t.authorized?t.authorized:[],e.payments.captured=t.captured?t.captured:[],e.payments.voided=t.voided?t.voided:[],e.payments.refunded=t.refunded?t.refunded:[],e.payments.payouts=t.payouts?t.payouts:[]}}},{key:"deleteFromStorage",value:function(){window.sessionStorage&&sessionStorage.payments&&sessionStorage.removeItem("payments")}},{key:"updateToStorage",value:function(){window.sessionStorage&&(sessionStorage.payments=JSON.stringify(e.payments))}},{key:"getAuthorizedPayments",value:function(){return e.payments.authorized}},{key:"getCapturedPayments",value:function(){return e.payments.captured}},{key:"getVoidedPayments",value:function(){return e.payments.voided}},{key:"getRefundedPayments",value:function(){return e.payments.refunded}},{key:"getPayouts",value:function(){return e.payments.payouts}}]),e}(),R=function(){function e(){u(this,e)}return d(e,null,[{key:"setFailedApiCommandAndOptions",value:function(t,n){e._failedApiCommand=t,e._failedApiCommandOptions=n}},{key:"setup",value:function(){setTimeout(function(){window.sessionStorage&&sessionStorage.apiAccessToken?(e.updateAccessCredentials(sessionStorage.apiAccessToken),e.hideAccessCredentialsForm()):e.showAccessCredentialsForm()},1e3),e.accessCredentialsButton.off().on("click",function(){e.executeApiAccessTokenRequest()})}},{key:"executeApiAccessTokenRequest",value:function(){var t=e.usernameInput.val(),n=e.passwordInput.val();if(t&&n){var o={username:t,password:n};e.appApiAccessTokenCommand.execute(null,o)}}},{key:"getApiAccessToken",value:function(){return e.apiAccessToken||e.loadApiAccessTokenFromSession(),e.apiAccessToken}},{key:"loadApiAccessTokenFromSession",value:function(){window.sessionStorage&&sessionStorage.apiAccessToken&&e.updateAccessCredentials(sessionStorage.apiAccessToken)}},{key:"deleteAccessCredentials",value:function(){e.usernameInput.val(""),e.passwordInput.val(""),window.sessionStorage&&sessionStorage.apiAccessToken&&sessionStorage.removeItem("apiAccessToken")}},{key:"updateAccessCredentials",value:function(t){e.apiAccessToken=t}},{key:"hideAccessCredentialsForm",value:function(){e.accessCredentialsWrapper.fadeOut("slow",function(){e.accessCredentialsWrapper.removeClass("d-flex")})}},{key:"showAccessCredentialsForm",value:function(){e.accessCredentialsWrapper.fadeIn("slow",function(){e.accessCredentialsWrapper.addClass("d-flex")})}},{key:"accessCredentialsButton",get:function(){return $("#save-access-credentials-button")}},{key:"usernameInput",get:function(){return $("#access-credentials-username")}},{key:"passwordInput",get:function(){return $("#access-credentials-password")}},{key:"accessCredentialsWrapper",get:function(){return $("#login-page-container")}},{key:"failedApiCommand",get:function(){return e._failedApiCommand}},{key:"failedApiCommandOptions",get:function(){return e._failedApiCommandOptions}},{key:"appApiAccessTokenCommand",get:function(){if(e._appApiAccessTokenCommand)return e._appApiAccessTokenCommand;var t=new f(function(){},function(t){e.updateAccessCredentials(t.access_token),window.sessionStorage&&(sessionStorage.apiAccessToken=t.access_token),e.hideAccessCredentialsForm(),e.failedApiCommand&&e.failedApiCommandOptions&&e.failedApiCommand.execute(e.failedApiCommandOptions.request,null,e.failedApiCommandOptions.pathVariable)},function(){});return e._appApiAccessTokenCommand=new y(t)}}]),e}();function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function O(e,t,n){return t&&q(e.prototype,t),n&&q(e,n),e}var S=function(){function e(t,n){P(this,e),this.commandButton=t,this.traceElement=n,this.testIframeUrl="http://localhost:8080/web/iframe-test?paymentRequestToken="}return O(e,[{key:"preActionHandler",value:function(){_.collapse("hide"),this.commandButton.attr("disabled",!0),e.toggleAllTraceElements(!1),M.hideView()}},{key:"successHandler",value:function(e){if(oe.preAuth=e,E.isCommandResponseSuccess(e)&&e.response.paymentInfo&&e.response.paymentInfo.preAuthToken){var t=T.noqodiPaymentPage+e.response.paymentInfo.preAuthToken;setTimeout(function(){this.toggleTraceElement(!0),ne.paymentLoadIframeCommand.execute(t)}.bind(this),200)}else{var n=this.testIframeUrl+"xxx-xxxx-xxxxx-xxxxxx-xxxxxxx";setTimeout(function(){this.toggleTraceElement(!0),ne.paymentLoadIframeCommand.execute(n)}.bind(this),200)}}},{key:"errorHandler",value:function(){setTimeout(function(){this.commandButton.attr("disabled",!1),this.toggleTraceElement(!1)}.bind(this),200)}},{key:"toggleTraceElement",value:function(e){E.toggleTraceElement(this.traceElement,e),E.toggleTraceElementAnimation(this.traceElement,e)}}],[{key:"toggleAllTraceElements",value:function(e){X.toggleTraceElement(e),Y.toggleTraceElement(e),Z.toggleTraceElement(e),ee.toggleTraceElement(e)}}]),e}(),I=function(){function e(t,n){P(this,e),this.traceElement=t,this.proceedToPaymentButton=n,this.noqodiReady=function(e){e.origin===T.noqodiPaymentPageOrigin&&e.source===j&&e.data===T.noqodiReadyData&&this.toggleTraceElement(!0)}.bind(this),this.noqodiAuthResponse=function(e){if(e.origin===T.noqodiPaymentPageOrigin&&e.source===j){var t=decodeURIComponent(e.data),n=t.indexOf("response="),o=t.indexOf("?response=");if(n>-1&&o>-1){var i=t.substr(n+9),a=t.substr(0,o);if(i&&a===T.callbackUrl){var s={serviceType:"AUTH",merchantInfo:{merchantCode:oe.preAuth.request.merchantInfo.merchantCode,merchantOrderId:oe.preAuth.request.merchantInfo.merchantOrderId,merchantRequestId:oe.preAuth.request.merchantInfo.merchantRequestId}};ne.paymentAuthResponseCommand.execute(s)}}}}.bind(this)}return O(e,[{key:"preActionHandler",value:function(e,t){t&&E.bindEvent(window,"message",this.noqodiReady)}},{key:"successHandler",value:function(e,t){t?(oe.iframe=e,E.bindEvent(window,"message",this.noqodiAuthResponse),setTimeout(function(){E.scrollTop(_,60)},100),p.editDisabled=!0):(this.proceedToPaymentButton.attr("disabled",!1),p.editDisabled=!1,E.scrollTop($("html, body")))}},{key:"errorHandler",value:function(){this.proceedToPaymentButton.attr("disabled",!1),p.editDisabled=!1,this.toggleTraceElement(!1)}},{key:"toggleTraceElement",value:function(e){E.toggleTraceElement(this.traceElement,e),E.toggleTraceElementAnimation(this.traceElement,e)}}]),e}(),H=function(){function e(t){P(this,e),this.traceElement=t}return O(e,[{key:"preActionHandler",value:function(){this.toggleTraceElement(!1)}},{key:"successHandler",value:function(t){oe.authResponse=t,this.toggleTraceElement(!0),E.isCommandResponseSuccess(t)&&(C.addAuthorizedPayment(t.response),e.showPaymentOptionsDialog(t))}},{key:"errorHandler",value:function(){this.toggleTraceElement(!1)}},{key:"toggleTraceElement",value:function(e){E.toggleTraceElement(this.traceElement,e),E.toggleTraceElementAnimation(this.traceElement,e)}}],[{key:"showPaymentOptionsDialog",value:function(e){B.show(function(){$("#capture-command-button").off().on("click",function(){B.hide(),ne.paymentCaptureCommand.execute(e.response)}),$("#void-auth-command-button").off().on("click",function(){B.hide(),ne.paymentVoidAuthCommand.execute(e.response)})})}}]),e}(),B=function(){function e(){P(this,e)}return O(e,null,[{key:"show",value:function(e){$("#void-capture-overlay-div").show("fast",e)}},{key:"hide",value:function(e){$("#void-capture-overlay-div").hide("fast")}}]),e}(),V=function(){function e(t){P(this,e),this.traceElement=t}return O(e,[{key:"preActionHandler",value:function(){this.toggleTraceElement(!1)}},{key:"successHandler",value:function(e){oe.capture=e,E.isCommandResponseSuccess(e)&&C.addCapturedPayment(e.response),this.toggleTraceElement(!0),ne.paymentLoadIframeCommand.execute()}},{key:"errorHandler",value:function(){this.toggleTraceElement(!1)}},{key:"toggleTraceElement",value:function(e){E.toggleTraceElement(this.traceElement,e),E.toggleTraceElementAnimation(this.traceElement,e)}}]),e}(),J=function(){function e(t){P(this,e),this.traceElement=t}return O(e,[{key:"preActionHandler",value:function(){this.toggleTraceElement(!1)}},{key:"successHandler",value:function(e){oe.capture=e,E.isCommandResponseSuccess(e)&&C.addVoidedPayment(e.response),this.toggleTraceElement(!0),ne.paymentLoadIframeCommand.execute()}},{key:"errorHandler",value:function(){this.toggleTraceElement(!1)}},{key:"toggleTraceElement",value:function(e){E.toggleTraceElement(this.traceElement,e),E.toggleTraceElementAnimation(this.traceElement,e)}}]),e}(),F=function(){function e(){P(this,e)}return O(e,[{key:"setup",value:function(){N.off().on("click",function(e){M.hideView(),M.showView(E.finalizeCommandResult(oe.preAuth),50)}.bind(this)),L.off().on("click",function(e){var t={};t.request='<span class="text-info">Below (noqodi Payment Page) URL was loaded into the iframe</span><br>'+oe.iframe,t.isJsonRequest=!1,t.isJsonResponse=!1,t.headerText="Load noqodi Payment Page (into iframe)",M.hideView(),M.showView(E.finalizeCommandResult(t),50)}.bind(this)),W.off().on("click",function(e){oe.authResponse.isJsonRequest=!1,oe.authResponse.isJsonResponse=!0,oe.authResponse.headerText="Payment Auth Response",oe.authResponse.request=void 0,oe.authResponse.httpMethod=void 0,oe.authResponse.requestUrl=void 0,oe.authResponse.httpStatus=void 0,M.hideView(),M.showView(E.finalizeCommandResult(oe.authResponse),50)}.bind(this)),G.off().on("click",function(e){M.hideView(),M.showView(E.finalizeCommandResult(oe.capture),50)}.bind(this))}}]),e}(),U=$("#proceed-to-payment-button"),_=$("#noqodi-payment-iframe-div"),D=document.getElementById("noqodi-payment-iframe"),j=D.contentWindow,M=new l,z=new w(D,_),N=$("#trace-element-preauth"),L=$("#trace-element-load-iframe"),W=$("#trace-element-auth-response"),G=$("#trace-element-capture"),K=$("#command-result-component-div"),Q=$("#command-result-component-wrapper"),X=new S(U,N),Y=new I(L,U),Z=new H(W),ee=new V(G),te=new J(G),ne={paymentPreAuthCommand:new v(X),paymentLoadIframeCommand:new g(Y,z),paymentAuthResponseCommand:new A(Z),paymentCaptureCommand:new b(ee),paymentVoidAuthCommand:new k(te)},oe={preAuth:null,iframe:null,authResponse:null,capture:null};!function(){initConfiguration(x.builder()),U.off().on("click",function(e){ne.paymentPreAuthCommand.execute(m)}.bind(this)),$(document).ready(function(){$("#payment-command-iframe-div").on("hidden.bs.collapse",function(){D.src="",D.innerHTML=""}),p.init(),R.setup(),C.setup()}),K.on("show.bs.collapse",function(){Q.removeClass("bg-white shadow-sm border border-light").addClass("bg-white shadow-sm border border-light")}),K.on("hidden.bs.collapse",function(){Q.removeClass("bg-white shadow-sm border border-light")}),(new F).setup()}()}]);
//# sourceMappingURL=noqodi-payment-core.js.map